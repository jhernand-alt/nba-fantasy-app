<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>GO LAKERS!!!</title>
    
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
    
</head>
<body>

    <main class="container"> 
        
        <header>
            <h1>Liga Fantasy NBA "GO LAKERS!!!"</h1>

            <div class="controls-and-filters" role="region" aria-label="Filtros y Controles de Datos">
                <!-- FILA 1: Botones de carga de archivos CSV -->
                <div id="fileControls" class="controls-row"> 
                    <label for="csvPlayers" class="btn-download">
                        Cargar Jugadores CSV ‚¨ÜÔ∏è
                        <input type="file" id="csvPlayers" accept=".csv" style="display: none;">
                    </label>
                    <label for="csvStats" class="btn-download">
                        Cargar Stats Semanales CSV ‚¨ÜÔ∏è
                        <input type="file" id="csvStats" accept=".csv" style="display: none;">
                    </label>
                </div>
                
                <!-- FILA 2: Selectores de filtros -->
                <div id="filterControls" class="controls-row"> 
                    <select id="fantasyTeamSelector" class="fantasy-team-selector" onchange="filterPlayersByFantasyTeam(this.value)" disabled>
                        <option value="all">TODOS LOS EQUIPOS FANTASY</option>
                        <!-- Opciones cargadas por JS -->
                    </select>
                    
                    <select id="nbaTeamSelector" class="fantasy-team-selector" onchange="filterPlayersByNBATeam(this.value)" disabled>
                        <option value="all">TODOS LOS EQUIPOS NBA</option>
                        <!-- Opciones cargadas por JS -->
                    </select>
                    
                    <div id="positionFilters" role="group" aria-label="Filtros por Posici√≥n de Jugador">
                        <button onclick="filterPlayersByPosition('all', this)" class="filter-btn active" aria-pressed="true">TODOS</button>
                        <button onclick="filterPlayersByPosition('PG', this)" class="filter-btn" aria-pressed="false">PG</button>
                        <button onclick="filterPlayersByPosition('SG', this)" class="filter-btn" aria-pressed="false">SG</button>
                        <button onclick="filterPlayersByPosition('SF', this)" class="filter-btn" aria-pressed="false">SF</button>
                        <button onclick="filterPlayersByPosition('PF', this)" class="filter-btn" aria-pressed="false">PF</button>
                        <button onclick="filterPlayersByPosition('C', this)" class="filter-btn" aria-pressed="false">C</button>
                        <button onclick="filterPlayersByPosition('G', this)" class="filter-btn" aria-pressed="false">G</button>
                        <button onclick="filterPlayersByPosition('F', this)" class="filter-btn" aria-pressed="false">F</button>
                    </div>
                </div>
            </div>
        </header>

        <section aria-labelledby="tablaJugadoresHeader">
            <h2 id="tablaJugadoresHeader">Estad√≠sticas Detalladas por Jugador</h2>
            <div class="table-wrapper">
                <table class="player-table" role="grid" aria-label="Tabla de datos de jugadores, ordenable y seleccionable">
                    <thead id="playerTableHeader">
                        <tr>
                            <th onclick="sortTable('name', this)" class="sortable">Nombre ‚áÖ</th>
                            <th onclick="sortTable('team', this)" class="sortable">Equipo NBA ‚áÖ</th>
                            <th onclick="sortTable('fantasyTeam', this)" class="sortable">Equipo Fantasy ‚áÖ</th> 
                            <th>Posici√≥n(es)</th> 
                            <th onclick="sortTable('totalPoints', this)" class="sortable">Puntos Totales ‚áÖ</th>
                            <th onclick="sortTable('averagePoints', this)" class="sortable">Puntos Promedio ‚áÖ</th>
                            <th onclick="sortTable('performance', this)" class="sortable">Rating ‚áÖ</th>
                        </tr>
                    </thead>
                    <tbody id="playerTableBody">
                        <tr><td colspan="7">Cargue los archivos CSV para ver los datos.</td></tr> 
                    </tbody>
                </table>
            </div>
        </section>

        <section aria-labelledby="graficoHeader">
            <h2 id="graficoHeader">Visualizaci√≥n de Puntos Semanales/Totales</h2>
            <figure class="chart-container" role="img" aria-label="Gr√°fico de l√≠nea comparando los puntos de los jugadores filtrados">
                <div class="chart-controls">
                    <select id="chartTypeSelector" class="chart-selector" onchange="updateChartDisplay()">
                        <option value="weekly">Puntos Semanales</option>
                        <option value="total">Puntos Totales</option>
                    </select>
                    <button id="downloadChart" class="btn-download" disabled>Descargar Gr√°fico üñºÔ∏è</button>
                </div>
                <canvas id="pointsChart"></canvas>
            </figure>
        </section>
        
        <!-- Secci√≥n explicativa -->
        <section class="info-section" aria-labelledby="infoHeader">
            <h2 id="infoHeader">‚ÑπÔ∏è Informaci√≥n de la Aplicaci√≥n</h2>
            
            <div class="info-content">
                <div class="info-block">
                    <h3>üìä ¬øQu√© hace esta aplicaci√≥n?</h3>
                    <p>Esta aplicaci√≥n te permite analizar y visualizar el rendimiento de jugadores NBA en tu liga fantasy. Carga dos archivos CSV con datos de jugadores y sus estad√≠sticas semanales para obtener an√°lisis detallados, gr√°ficos comparativos y ratings de rendimiento.</p>
                </div>
                
                <div class="info-block">
                    <h3>üéØ C√°lculo del Rating (0-100)</h3>
                    <p>El rating combina tres factores clave:</p>
                    <ul>
                        <li><strong>Volumen (50%):</strong> Puntos totales acumulados</li>
                        <li><strong>Regularidad (30%):</strong> Consistencia semana a semana (menor variaci√≥n = mejor rating)</li>
                        <li><strong>Actividad (20%):</strong> Porcentaje de semanas jugadas</li>
                    </ul>
                    <p class="info-note"><em>Nota: Puedes modificar estos porcentajes editando las variables RATING_WEIGHTS al inicio del archivo app.js</em></p>
                </div>
                
                <div class="info-block">
                    <h3>üìà Indicadores de Tendencia</h3>
                    <ul class="trend-list">
                        <li><span class="trend-indicator trend-up">‚Üë</span> <strong>Subiendo:</strong> El jugador est√° mejorando (√∫ltimas 3 semanas > 5% mejor que las 3 anteriores)</li>
                        <li><span class="trend-indicator trend-down">‚Üì</span> <strong>Bajando:</strong> El jugador est√° decayendo (√∫ltimas 3 semanas > 5% peor que las 3 anteriores)</li>
                        <li><span class="trend-indicator trend-stable">‚àí</span> <strong>Estable:</strong> Rendimiento consistente sin cambios significativos</li>
                    </ul>
                </div>
                
                <div class="info-block">
                    <h3>üîß C√≥mo usar los filtros</h3>
                    <ul>
                        <li><strong>Equipos Fantasy:</strong> Filtra jugadores por su equipo en tu liga</li>
                        <li><strong>Equipos NBA:</strong> Filtra jugadores por su equipo real de la NBA</li>
                        <li><strong>Posiciones:</strong> Filtra por posici√≥n en la cancha (PG, SG, SF, PF, C, G, F)</li>
                        <li><strong>Ordenaci√≥n:</strong> Haz clic en cualquier columna con ‚áÖ para ordenar ascendente/descendente</li>
                    </ul>
                </div>
                
                <div class="info-block">
                    <h3>üìÅ Formato de archivos CSV</h3>
                    <p><strong>jugadores.csv:</strong> C√≥digo-Nombre; Nombre; C√≥digo-Equipo Fantasy; C√≥digo-Equipo NBA; Posici√≥n; Enlace ESPN</p>
                    <p><strong>stats_semanales.csv:</strong> ID_NBA; Semana; Puntos_Fantasy</p>
                    <p class="info-note"><em>Importante: Guarda los archivos como CSV UTF-8 para que los caracteres especiales (√±, √°, etc.) se muestren correctamente</em></p>
                </div>
            </div>
        </section>
        
        <div class="credit-text-main">
            Hecho por Juli√°n Hern√°ndez (<span id="currentDatePlaceholder"></span>)
        </div>

    </main>
    
    <script src="app.js"></script>
</body>
</html>
