<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>GO LAKERS!!!!</title>
    
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
    
</head>
<body>

    <main class="container"> 
        
        <header>
            <h1>Liga Fantasy NBA "GO LAKERS!!!!"</h1>

            <div class="controls-and-filters" role="region" aria-label="Filtros y Controles de Datos">
                <div id="unifiedControls" class="controls-row"> 
                    
                    <label for="csvFile" class="btn-download">
                        Cargar Datos CSV ‚¨ÜÔ∏è
                        <input type="file" id="csvFile" accept=".csv" style="display: none;">
                    </label>
                    <button id="downloadCSV" class="btn-download" disabled>Descargar Datos CSV ‚¨áÔ∏è</button>
                    
                    <span style="separator"></span>

                    <select id="fantasyTeamSelector" class="fantasy-team-selector" onchange="filterPlayersByFantasyTeam(this.value)" disabled>
                        <option value="all">TODOS LOS EQUIPOS FANTASY</option>
                        <!-- Opciones cargadas por JS -->
                    </select>
                    
                    <div id="positionFilters" role="group" aria-label="Filtros por Posici√≥n de Jugador">
                        <button onclick="filterPlayersByPosition('all', this)" class="filter-btn active" aria-pressed="true">TODOS</button>
                        <button onclick="filterPlayersByPosition('PG', this)" class="filter-btn" aria-pressed="false">PG</button>
                        <button onclick="filterPlayersByPosition('SG', this)" class="filter-btn" aria-pressed="false">SG</button>
                        <button onclick="filterPlayersByPosition('SF', this)" class="filter-btn" aria-pressed="false">SF</button>
                        <button onclick="filterPlayersByPosition('PF', this)" class="filter-btn" aria-pressed="false">PF</button>
                        <button onclick="filterPlayersByPosition('C', this)" class="filter-btn" aria-pressed="false">C</button>
                        <button onclick="filterPlayersByPosition('G', this)" class="filter-btn" aria-pressed="false">G</button>
                        <button onclick="filterPlayersByPosition('F', this)" class="filter-btn" aria-pressed="false">F</button>
                    </div>
                </div>
            </div>
        </header>

        <section aria-labelledby="tablaJugadoresHeader">
            <h2 id="tablaJugadoresHeader">Estad√≠sticas Detalladas por Jugador</h2>
            <div class="table-wrapper">
                <table class="player-table" role="grid" aria-label="Tabla de datos de jugadores, ordenable y seleccionable">
                    <thead id="playerTableHeader">
                        <tr>
                            <th onclick="sortTable('fantasyTeam', this)">Equipo Fantasy</th> 
                            <th onclick="sortTable('name', this)">Nombre</th>
                            <th onclick="sortTable('team', this)">Equipo NBA</th>
                            <th>Posici√≥n(es)</th> 
                            <th onclick="sortTable('gamesPlayed', this)">Partidos Jugados</th>
                            <th onclick="sortTable('totalPoints', this)">Puntos Totales</th>
                            <th onclick="sortTable('averagePoints', this)">Puntos Promedio</th>
                            <th>MARGEN DE ERROR</th>
                        </tr>
                    </thead>
                    <tbody id="playerTableBody">
                        <tr><td colspan="8">Cargue un archivo CSV para ver los datos.</td></tr> 
                    </tbody>
                </table>
            </div>
        </section>

        <section aria-labelledby="graficoHeader">
            <h2 id="graficoHeader">Visualizaci√≥n de Puntos Diarios/Semanales</h2>
            <figure class="chart-container" role="img" aria-label="Gr√°fico de l√≠nea comparando los puntos de los jugadores filtrados">
                <div class="chart-controls">
                    <select id="chartTypeSelector" class="chart-selector" onchange="updateChartDisplay()">
                        <option value="daily">Puntos Diarios</option>
                        <option value="weekly">Puntos Semanales</option>
                    </select>
                    <button id="downloadChart" class="btn-download" disabled>Descargar Gr√°fico üñºÔ∏è</button>
                </div>
                <canvas id="pointsChart"></canvas>
            </figure>
        </section>
        
        <div class="credit-text-main">
            Hecho por Juli√°n Hern√°ndez (√öltima versi√≥n <span id="currentDatePlaceholder"></span>)
        </div>

    </main>
    
    <script src="app.js"></script>
</body>
</html>